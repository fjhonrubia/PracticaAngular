//servicio para los génerosangular.module('jeviteca').service('GenerosProvider',['$http', '$q', function($http,$q){		//obtener todos los generos	this.getGeneros = function() {		return $http.get('data/genres.json');	};	//obtener los géneros favoritos del usuario	this.getFavsGeneros = function() {		var deferred = $q.defer();		var generosFavs;		if (typeof(Storage) !== 'undefined') {			generosFavs = JSON.parse(localStorage.getItem('GenerosFavs1'));			deferred.resolve(generosFavs);			return deferred.promise;		} else {			deferred.reject("Error en la obtención de Géneros favoritos");			return deferred.promise;		}	};	//almacenar el género favorito de un usuario	this.saveFavsGenero = function(Genero) {		if (typeof(Storage) !== 'undefined') {			//se obtienen los géneros favoritos que se han almacenado			var generosFavs = [];			if (JSON.parse(localStorage.getItem('GenerosFavs1'))) {				generosFavs = JSON.parse(localStorage.getItem('GenerosFavs1'));				var encontrado = false;				//antes de almacenar el género se comprueba si ya existe en favoritos				for (var idx in generosFavs) {					if (generosFavs[idx].id === Genero.id) {						encontrado = true;					}				}				if (!encontrado) {					generosFavs.push(Genero);				}			} else {				generosFavs.push(Genero);			}			//se vuelve a serializar el objeto y a almacenarlo en el localStorage			localStorage.setItem('GenerosFavs1', JSON.stringify(generosFavs));		}	};}]);